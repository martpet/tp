// Vitest Snapshot v1

exports[`post-generate-upload-urls > calls "createPresignedPost" with correct args 1`] = `
[
  [
    DummyS3Client {},
    {
      "Bucket": "dummyPhotoBucket",
      "Conditions": [
        [
          "content-length-range",
          0,
          31457280,
        ],
      ],
      "Expires": 30,
      "Key": "dummySub/2022-01-01T00:00:00.000Z/dummyFingerprint2.jpg",
    },
  ],
]
`;

exports[`post-generate-upload-urls > calls "findExistingItems" with correct args 1`] = `
[
  [
    [
      "dummyFingerprint1",
      "dummyFingerprint2",
    ],
  ],
]
`;

exports[`post-generate-upload-urls > calls "getIdTokenPayload" with correct args 1`] = `
[
  [
    "dummyAuthorizationHeader",
  ],
]
`;

exports[`post-generate-upload-urls > resolves with a correct value 1`] = `
{
  "existingFingerprintsInDb": [
    "dummyFingerprint1",
  ],
  "uploadUrls": {
    "dummyFingerprint2": "dummyPresignedPost",
  },
}
`;

exports[`post-generate-upload-urls > when "authorization" header is missing > calls "errorResponse" with correct args 1`] = `
[
  [
    "Vf5Ph6qN1S",
  ],
]
`;

exports[`post-generate-upload-urls > when "authorization" header is missing > resolves with a correct value 1`] = `"dummyErrorResponse"`;

exports[`post-generate-upload-urls > when "event.body" is missing > calls "errorResponse" with correct args 1`] = `
[
  [
    "G-luuHqI0s",
    {
      "statusCode": 400,
    },
  ],
]
`;

exports[`post-generate-upload-urls > when "event.body" is missing > resolves with a correct value 1`] = `"dummyErrorResponse"`;

exports[`post-generate-upload-urls > when "event.body" is not JSON > calls "errorResponse" with correct args 1`] = `
[
  [
    "9210145fdf",
    {
      "error": [SyntaxError: Unexpected token o in JSON at position 1],
      "statusCode": 400,
    },
  ],
]
`;

exports[`post-generate-upload-urls > when "event.body" is not JSON > resolves with a correct value 1`] = `"dummyErrorResponse"`;

exports[`post-generate-upload-urls > when "photoBucket" env var is missing > calls "errorResponse" with correct args 1`] = `
[
  [
    "1rQkj3kpp4",
  ],
]
`;

exports[`post-generate-upload-urls > when "photoBucket" env var is missing > resolves with a correct value 1`] = `"dummyErrorResponse"`;

exports[`post-generate-upload-urls > when \`findExistingItems\` throws > calls "errorResponse" with correct args 1`] = `
[
  [
    "9fb96f4182",
    {
      "error": [Error: dummyFindExistingItemsError],
    },
  ],
]
`;

exports[`post-generate-upload-urls > when \`findExistingItems\` throws > resolves with a correct value 1`] = `"dummyErrorResponse"`;
